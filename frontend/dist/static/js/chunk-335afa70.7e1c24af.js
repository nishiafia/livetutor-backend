(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-335afa70"],{"730c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",{staticClass:"pa-4"},[a("v-card-actions",[a("v-btn",{on:{click:e.deleteExam}},[e._v("Delete")]),a("v-spacer"),a("v-btn",{on:{click:function(t){return e.updateExam(e.exam)}}},[e._v("Save")])],1),a("v-text-field",{attrs:{label:"Title"},model:{value:e.exam.name,callback:function(t){e.$set(e.exam,"name",t)},expression:"exam.name"}}),a("v-text-field",{attrs:{label:"Description"},model:{value:e.exam.description,callback:function(t){e.$set(e.exam,"description",t)},expression:"exam.description"}}),a("v-text-field",{attrs:{label:"Mark"},model:{value:e.exam.mark,callback:function(t){e.$set(e.exam,"mark",t)},expression:"exam.mark"}}),a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.exam.exam_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.exam,"exam_date",t)},"update:return-value":function(t){return e.$set(e.exam,"exam_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Date","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.exam.exam_date,callback:function(t){e.$set(e.exam,"exam_date",t)},expression:"exam.exam_date"}},"v-text-field",i,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.exam.exam_date,callback:function(t){e.$set(e.exam,"exam_date",t)},expression:"exam.exam_date"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.exam.exam_date)}}},[e._v(" OK ")])],1)],1),a("v-menu",{ref:"menu3",attrs:{"nudge-right":40,"return-value":e.exam.start_time,transition:"scale-transition","offset-y":"","close-on-content-click":!1,"max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.exam,"start_time",t)},"update:return-value":function(t){return e.$set(e.exam,"start_time",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Exam Start Time","prepend-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.exam.start_time,callback:function(t){e.$set(e.exam,"start_time",t)},expression:"exam.start_time"}},"v-text-field",i,!1),n))]}}]),model:{value:e.menu3,callback:function(t){e.menu3=t},expression:"menu3"}},[e.menu3?a("v-time-picker",{attrs:{"full-width":""},model:{value:e.exam.start_time,callback:function(t){e.$set(e.exam,"start_time",t)},expression:"exam.start_time"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.exam.start_time)}}},[e._v(" OK ")])],1):e._e()],1),a("v-menu",{ref:"menu2",attrs:{"nudge-right":40,"return-value":e.exam.end_time,transition:"scale-transition","offset-y":"","close-on-content-click":!1,"max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(t){return e.$set(e.exam,"end_time",t)},"update:return-value":function(t){return e.$set(e.exam,"end_time",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,i=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Exam End Time","prepend-icon":"mdi-clock-time-four-outline",readonly:""},model:{value:e.exam.end_time,callback:function(t){e.$set(e.exam,"end_time",t)},expression:"exam.end_time"}},"v-text-field",i,!1),n))]}}]),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[e.menu2?a("v-time-picker",{attrs:{"full-width":""},model:{value:e.exam.end_time,callback:function(t){e.$set(e.exam,"end_time",t)},expression:"exam.end_time"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.exam.end_time)}}},[e._v(" OK ")])],1):e._e()],1)],1)],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[a("v-icon",[e._v("mdi-file-image-outline")]),a("span",[e._v("Files")])],1)]),a("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},e._l(e.exam.files,(function(t,n){return a("v-col",{key:n,attrs:{cols:"4"}},[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(e){var n=e.hover;return[a("v-card",{class:{"on-hover":n},attrs:{elevation:n?12:2}},[a("thumbnail",{attrs:{file:t.file}})],1)]}}],null,!0)})],1)})),1),a("v-card-actions",[a("v-file-input",{attrs:{multiple:"",chips:""},model:{value:e.newFiles,callback:function(t){e.newFiles=t},expression:"newFiles"}}),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",outlined:""},on:{click:e.addFiles}},[e._v("Add")])],1)],1)],1)],1),a("v-row"),a("v-card",{staticClass:"mt-4"},[a("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:e.headers,items:e.submissions,"item-key":"id"},scopedSlots:e._u([{key:"item.mark",fn:function(t){var n=t.item;return[a("v-text-field",{attrs:{type:"number",max:e.exam.mark,step:"0.1",suffix:"/"+e.exam.mark},on:{change:function(t){return e.updateMark(t,n)}},model:{value:n.mark,callback:function(t){e.$set(n,"mark",t)},expression:"item.mark"}})]}}])})],1)],1)},i=[],r=a("7424"),s=a("7fa2");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={components:{Thumbnail:s["a"]},name:"Exam",data:function(){return{menu:!1,menu2:!1,menu3:!1,newFiles:[],transparent:"rgba(255, 255, 255, 0)",headers:[{text:"Submitted By",value:"room_user.name"},{text:"Submitted At",value:"created_at"},{text:"Submission Status",value:"submit_status"},{text:"Mark",value:"mark"},{text:"File",value:"files"}],submissions:[]}},created:function(){var e=this;r["a"].get("exams/".concat(this.$route.params.id,"/submissions/")).then((function(t){return e.submissions=t.data.map((function(e){return l(l({},e),{},{created_at:new Date(e.created_at).toLocaleString()})}))}))},methods:{updateMark:function(e,t){var a=t.id;this.$api.put("exams/".concat(this.$route.params.id,"/submissions/update-mark/"),{mark:e,exam_submission_id:a}).then((function(e){return console.log(e)}))},deleteFile:function(e){var t=e.id;e.exam_id;return r["a"].delete("exam_files/".concat(t))},deleteExam:function(){return this.$store.dispatch("exams/delete",this.exam.id)},addFiles:function(){var e=new FormData;if(e.append("id",this.exam.id),this.newFiles.length>0)for(var t=0;t<this.newFiles.length;t++)e.append("attachments[]",this.newFiles[t]);return r["a"].post("exam_files/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return console.log(e)}))},updateExam:function(e){var t=e.id,a=e.class_id,n=e.name,i=e.description,r=e.exam_date,s=e.start_time,o=e.end_time,l=e.mark;return this.$store.dispatch("exams/update",{id:t,class_id:a,name:n,description:i,exam_date:r,start_time:s,end_time:o,mark:l})}},computed:{exam:function(){var e=this;return this.$store.state.exams.exams.find((function(t){return t.id==e.$route.params.id}))}}},m=u,d=(a("c136"),a("2877")),f=a("6544"),v=a.n(f),p=a("8336"),x=a("b0af"),h=a("99d9"),b=a("62ad"),_=a("a523"),k=a("8fea"),y=a("2e4b"),g=a("23a7"),w=a("ce87"),$=a("132d"),O=a("e449"),j=a("0fd9"),V=a("2fa4"),S=a("8654"),F=a("c964"),C=Object(d["a"])(m,n,i,!1,null,"3794a873",null);t["default"]=C.exports;v()(C,{VBtn:p["a"],VCard:x["a"],VCardActions:h["a"],VCardTitle:h["d"],VCol:b["a"],VContainer:_["a"],VDataTable:k["a"],VDatePicker:y["a"],VFileInput:g["a"],VHover:w["a"],VIcon:$["a"],VMenu:O["a"],VRow:j["a"],VSpacer:V["a"],VTextField:S["a"],VTimePicker:F["a"]})},"7fa2":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.file.split(".").pop().match(/(jpg|jpeg|png|gif)$/i)?a("v-img",{staticClass:"grey lighten-2",attrs:{src:e.file,"max-width":"100%",height:"150"},on:{click:function(t){return e.openFile(e.file)}}}):a("v-img",{attrs:{"max-width":"100%",height:"150"},on:{click:function(t){return e.openFile(e.file)}}},[a("v-row",{staticClass:"fill-height",attrs:{justify:"center",align:"center"}},[a("h1",[e._v(e._s(e.file.split(".").pop()))])])],1)},i=[],r={name:"Thumbnail",props:{file:{type:String,required:!0}},methods:{openFile:function(e){window.open(e,"_blank")}}},s=r,o=a("2877"),l=a("6544"),c=a.n(l),u=a("adda"),m=a("0fd9"),d=Object(o["a"])(s,n,i,!1,null,null,null);t["a"]=d.exports;c()(d,{VImg:u["a"],VRow:m["a"]})},c136:function(e,t,a){"use strict";a("edcd")},ce87:function(e,t,a){"use strict";var n=a("16b7"),i=a("f2e7"),r=a("58df"),s=a("d9bd");t["a"]=Object(r["a"])(n["a"],i["a"]).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(e=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(this.disabled||(e.data=e.data||{},this._g(e.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),e):(Object(s["c"])("v-hover should only contain a single element",this),e)):(Object(s["c"])("v-hover is missing a default scopedSlot or bound value",this),null);var e}})},edcd:function(e,t,a){}}]);
//# sourceMappingURL=chunk-335afa70.7e1c24af.js.map